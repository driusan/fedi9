#!/bin/rc

tmpfile=/tmp/personrecord.$pid
cat > $tmpfile

# Section 3.1
# all objects MUST have unique global identifiers
# MUST have globally unique id, type
id=`{fedi9/extractkey id < $tmpfile}
type=`{fedi9/extractkey type < $tmpfile}

# MUST have Inbox, outbox
inbox=`{fedi9/extractkey inbox < $tmpfile}
outbox=`{fedi9/extractkey outbox < $tmpfile}

# SHOULD HAVE following, followers
following=`{fedi9/extractkey following < $tmpfile}
followers=`{fedi9/extractkey followers <$tmpfile}

# These may or may not exist
preferredUsername=`{fedi9/extractkey preferredUsername <$tmpfile}
name=(`{fedi9/extractkey name < $tmpfile})
rm $tmpfile

uuid=`{fedi9/newuuid}

echo id'='$id type'='$type
echo '	' inbox'='$inbox outbox'='$outbox
echo '	' following'='$following followers'='$followers
echo '	' preferredUsername'="'$"preferredUsername"
echo '	' name'="'$"name"
echo '	' uuid'='$"uuid
